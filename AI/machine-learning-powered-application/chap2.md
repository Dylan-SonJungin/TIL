# Chap2. 계획 수립하기

> 머신러닝의 **필요성** 예측, **적절하게** 적용할 수 있는 곳을 찾아 **목표를** 설정
>
> ❌*머신러닝이 항상 필요하지는 않다*❌

<br/>

## 2.1 성공 측정하기

#### 2.1.1 비즈니스 성능

- `오직 제품의 성공을 반영`
  - 제품의 성공 지표 = 사용자 수, 상품 클릭률 (CTR) 등
  - 가드레일 메트릭 (Gardrail Metric) : 특정 지점 아래로 내려가면 안되는 기준
- Chap1 에디터 → *추천의 유용성* 측정
  - 추천을 선택한 횟수의 비율 → 인터페이스가 사용자가 제안을 수락했는지 감지




<br/>

#### 2.1.2 모델 성능

- `오프라인 메트릭 (Offline Metric)` + `모델 메트릭 (Model Metric)` = 모델을 사용자에게 노출하지 않고 평가

1. **모델과 제품 사이의 상호작용을 바꾸자**

   - EX. 검색어 입력 시 추천 단어 제시
     1. *다음 단어를 올바르게 예측한 빈도*를 단어 수준의 정확도로 계산하여 모델의 성능을 측정
     2. 입력 상품을 상품 카테고리로 분류하고, 가장 가능성 있는 3개의 카테고리를 추천 → ***카테고리에 대한 정확도***를 사용해 모델의 성능 측정

   - 모델링 작업을 쉽게 만들기 위한 수정 방법
     1. 인터페이스 수정: 신뢰도가 기준 이하인 경우, 모델의 출력 결과 생략
        1. 다른 결과 제시: 최상 모델 예측 + 기타 모델 예측 + 경험적 규칙 결과 + ....
        2. 사용자와 소통: 피드백은 필수

<br/>

2. **제품 성능에 잘 맞는 모델 측정 지표를 추가로 만들자**

   - EX. 스케치에서 HTML 자동 생성

     1. Cross-Entropy Loss 를 사용해 예측된 HTML token / 온바른 token 비교 → *정렬 상태 비교 ❌*
     2.  최적화 지표 이상을 고려하도록 BLEU 점수 사용

     <img src="https://i0.wp.com/sefiks.com/wp-content/uploads/2017/12/one-hot-encoding.png?resize=1140%2C608&ssl=1" alt="cross" style="zoom:30%;" />

​							<img src="https://www.elastic.co/search-labs/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2Fme0ej585%2Fsearch-labs-import-testing%2F1864fc29ad684a694d048b94eab850d68aeeac49-1235x473.png&w=3840&q=75" alt="bleu" style="zoom:30%;" />



<br/>

3. **현실적인 성능을 전제로 제품을 설계하자**

   → 모델의 완벽한 성능을 전제로 제품을 설계하면 위험하다

   - EX. 약 사진으로 환자에게 약의 종류와 복용량을 알려주는 모델
     - 최악의 정확도는? 사용자에게 위험을 안기지 않는 방법은? ...

   

   

   <br/>

4. **정밀도를 높여 시스템의 품질을 높이자**

   - Chap1 에디터에서는 부적절한 추천을 최소화하기 위해 높은 정밀도를 우선시
     - `정밀도 (Precision)`: 모델이 '좋다'고 예측한 질문 중 실제로 좋은 질문의 비율을 의미
     - `재현율 (Recall)` : 데이터셋에 있는 좋은 질문 전체에서 모델이 좋은 질문으로 예측한 비율
   - 정밀도가 높은 모델 → 질문을 좋은 것으로 분류 or 추천 시 정확도가 더 높다
   - `검증 세트 (Validation Set)` 을 이용하여 측정값 계산

   <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/Precisionrecall.svg/1200px-Precisionrecall.svg.png" alt="t" style="zoom:20%;" />

   <img src="https://miro.medium.com/v2/resize:fit:1400/1*pOtBHai4jFd-ujaNXPilRg.png" alt="p" style="zoom:60%;" />



<br/>

#### 2.1.3 최신성과 분포 변화

지도학습 모델의 **예측 성능** → 입력 특성과 예측 타깃 사이의 **연관성 학습** 을 통해

- EX. 샌프란시스코 강수량을 통해 교통 상황 예측 모델
  1. 지난 3개월 데이터 사용하여 10월 모델 제작 → 강수량 1인치 미만
  2. 계절이 변하며 평균 강수량은 3인치로 상승  → 모델 성능 부정확
- `데이터 최신성 (Freshness)` 요구됨
  - 최신 데이터로 모델을 다시 훈련? 비용은?
  - Chap1 에디터: '잘 쓰인 문장' 의 변화 주기 = 1년, 하지만 주제에 따라 최신성에 대한 요구는 다르다 (수학은 느리고, 음악은 빠르다)
  - 애플리케이션의 인기가 높으면 데이터 수집 요구 용이: 사용자가 출력의 품질을 평가하는 버튼을 추가→  사용자의 원래 입력 + 모델 예측 + 관련된 사용자 평가를 모아 훈련 세트로 사용

<br/>

#### 2.1.4 속도

**빠르게**! → 사용자와 모델의 상호작용 용이 + 동시에 많은 사용자에게 제공

- 짧은 문장을 번역 → 즉시, 의료 영상 분석 → 24시간

- Chap1 에디터

  1.  사용자가 입력 상자에  입력하고, 등록 버튼을 눌러서 결과 출력

  2. 사용자가 새로운 글자를 입력할 때마다 *동적*으로 결과를 업데이트

     → 모델은 1초 이내에 작동해야함 (2초 이내 전체 파이프라인 통과)

- 모델의 추론시간은 복잡함에 비례

  - NLP 중 LSTM 은 Random Forest 에 비해 약 3배 느림, 동시에 많은 샘플에 대한 추론을 할 시 차이 커짐

- 추론 수행 과정에 여러 네트워크 호출과 데이터베이스 쿼리가 연관된 복잡한 애플리케이션 → 실행 시간이 나머지 애플리케이션 로직에 비해 짧음
  → 이 경우에는 모델의 속도 문제 X



<br/><br/>

## 2.2 작업 범위와 문제점 예상하기

#### 2.2.1

